(this.webpackJsonpmark_ii=this.webpackJsonpmark_ii||[]).push([[0],{118:function(e,t,n){e.exports={login:"AddEvent_login__2TrxK",form:"AddEvent_form__28EI8",submit:"AddEvent_submit__19A21"}},119:function(e,t,n){e.exports={login:"Auth_login__10g92",form:"Auth_form__1pIfH",submit:"Auth_submit__4JGI4"}},129:function(e,t,n){e.exports={container:"Question_container__1gP25",ques:"Question_ques__1diKT"}},130:function(e,t,n){e.exports={container:"Options_container__5jxCM",check:"Options_check__3G7YW"}},153:function(e,t,n){e.exports={row:"Events_row__vWc42"}},170:function(e,t,n){},202:function(e,t){},203:function(e,t,n){},281:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(36),r=n.n(i),o=(n(169),n(170),n(28)),c=n(31),l=n(9),u=n(10),d=n(11),h=n(12),v=n(32),j=n(65),p=n.n(j),b=n(5),m=n.n(b),f=n(6),O=n(4),g=function(e){var t=e.hoursMinSecs,n=t.days,a=void 0===n?0:n,i=t.hours,r=void 0===i?0:i,o=t.minutes,c=void 0===o?0:o,l=t.seconds,u=void 0===l?0:l,d=s.a.useState([a,r,c,u]),h=Object(f.a)(d,2),v=Object(f.a)(h[0],4),j=v[0],p=v[1],b=v[2],m=v[3],g=h[1];return s.a.useEffect((function(){var e=setInterval((function(){j<=0&&p<=0&&b<=0&&m<=0?console.log("its live"):g(0===p&&0===b&&0===m?[j-1,23,59,59]:0===b&&0===m?[j,p-1,59,59]:0===m?[j,p,b-1,59]:[j,p,b,m-1])}),1e3);return function(){return clearInterval(e)}})),j<=0&&p<=0&&b<=0&&m<=0?Object(O.jsx)("p",{children:"Live"}):Object(O.jsx)("div",{children:Object(O.jsxs)("p",{children:["Live In ","".concat(j.toString().padStart(2,"0"),":").concat(p.toString().padStart(2,"0"),":").concat(b.toString().padStart(2,"0"),":").concat(m.toString().padStart(2,"0"))]})})};var x=function(e){var t=e.event._id,n=e.timeToLive;return console.log(e.event),Object(O.jsx)("div",{className:"col "+m()(p.a.container,p.a.event),children:Object(O.jsxs)("div",{className:p.a.card,children:[Object(O.jsx)("h2",{children:e.event.name}),Object(O.jsx)(g,{hoursMinSecs:n}),Object(O.jsx)(o.b,{to:e.isAuthenticated?"/event/"+t:"/authentication",children:Object(O.jsx)("div",{className:m()(p.a.right),children:Object(O.jsx)("i",{className:"fa fa-arrow-right"})})}),Object(O.jsx)("div",{className:p.a.pic}),Object(O.jsxs)("ul",{children:[Object(O.jsx)("li",{}),Object(O.jsx)("li",{}),Object(O.jsx)("li",{}),Object(O.jsx)("li",{}),Object(O.jsx)("li",{}),Object(O.jsx)("li",{}),Object(O.jsx)("li",{}),Object(O.jsx)("li",{}),Object(O.jsx)("li",{}),Object(O.jsx)("li",{}),Object(O.jsx)("li",{}),Object(O.jsx)("li",{}),Object(O.jsx)("li",{}),Object(O.jsx)("li",{}),Object(O.jsx)("li",{}),Object(O.jsx)("li",{}),Object(O.jsx)("li",{}),Object(O.jsx)("li",{}),Object(O.jsx)("li",{}),Object(O.jsx)("li",{}),Object(O.jsx)("li",{}),Object(O.jsx)("li",{}),Object(O.jsx)("li",{})]}),Object(O.jsxs)("div",{className:p.a.social,children:[Object(O.jsx)("i",{className:"fa fa-facebook-f"}),Object(O.jsx)("i",{className:"fa fa-twitter"}),Object(O.jsx)("i",{className:"fa fa-instagram"}),Object(O.jsx)("i",{className:"fa fa-github"})]}),Object(O.jsx)(o.b,{to:e.isAuthenticated?"/event/"+t:"/authentication",children:Object(O.jsx)("button",{})})]})})},_=n(153),S=n.n(_),k=n(26),y=n.n(k),E=n(81),N=n.n(E);var C=function(e){return Object(O.jsxs)("div",{className:N.a.container,children:[Object(O.jsxs)("div",{className:N.a.body,children:[Object(O.jsxs)("span",{children:[Object(O.jsx)("span",{}),Object(O.jsx)("span",{}),Object(O.jsx)("span",{}),Object(O.jsx)("span",{})]}),Object(O.jsxs)("div",{className:N.a.base,children:[Object(O.jsx)("span",{}),Object(O.jsx)("div",{className:N.a.face})]})]}),Object(O.jsxs)("div",{className:N.a.longfazers,children:[Object(O.jsx)("span",{}),Object(O.jsx)("span",{}),Object(O.jsx)("span",{}),Object(O.jsx)("span",{})]}),Object(O.jsx)("h1",{children:"Loading"})]})},I=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={events:[],loading:!0},e.timeToLive=function(e){var t=new Date,n=Date.parse(e)-t.getTime();return{days:Math.floor(n/864e5),hours:Math.floor(n/36e5%24),minutes:Math.floor(n/6e4%60),seconds:Math.floor(n/1e3%60)}},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;y.a.get("/eventService/getEvents",{headers:{Authorization:"Bearer ".concat(this.props.token)}}).then((function(t){var n=t.data.data;e.setState({events:n,loading:!1})}))}},{key:"render",value:function(){var e,t=this;return e=this.state.events.map((function(e){return Object(O.jsx)(x,{timeToLive:t.timeToLive(e.endTime),isAuthenticated:t.props.isAuthenticated,event:e},e._id)})),Object(O.jsx)("div",{className:"row justify-content-start "+S.a.row,children:this.state.loading?Object(O.jsx)(C,{}):e})}}]),n}(a.Component),T=Object(c.b)((function(e){return{token:e.auth.token,isAuthenticated:null!==e.auth.token}}))(I),A=n(34),w=n(22),D=n.n(w),R=n(56),z=n.n(R),L=n(60),q={algowls:n.p+"static/media/algowls.741b22f3.png",webgators:n.p+"static/media/webgators.5727da51.png",battleofbytes:n.p+"static/media/battleofbytes.a642bb2e.jpg",bumblejumble:n.p+"static/media/bumblejumble.8a917265.png",codebenders:n.p+"static/media/codebenders.01c860d3.png",techwars:n.p+"static/media/techwars.3c11ed1f.png",tvfandom:n.p+"static/media/tvfandom.e016fa9d.png",socialhunt:n.p+"static/media/socialhunt.a54d7561.png"},H=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={event:null,eventName:null,isEventDeleted:!1,loading:!0,isLive:!1,hasRegistered:!1,hasSubmitted:!1,hasStarted:!1,hasEnded:!1},e.userId=JSON.parse(localStorage.getItem("userId"))._id,e.timeToLive=function(t){var n=new Date,a=Date.parse(t)-n.getTime(),s=Math.floor(a/864e5),i=Math.floor(a/36e5%24),r=Math.floor(a/6e4%60),o=Math.floor(a/1e3%60),c={days:s,hours:i,minutes:r,seconds:o};return s<=0&&i<=0&&r<=0&&o<=0&&(e.state.isLive||e.setState({isLive:!0})),c},e.addStartTime=Object(A.a)(D.a.mark((function t(){var n,a,s;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(" i am called"),n=new Date,a=n.getTime(),s={eventCode:e.state.event.eventCode,userId:e.userId,startTime:a},t.next=6,y.a.post("/quizService/addStartTime/",s,{headers:{Authorization:"Bearer ".concat(e.props.token)}});case 6:e.props.history.push("/eventExam/".concat(e.state.event._id));case 7:case"end":return t.stop()}}),t)}))),e.getEndTime=function(){var t=Object(A.a)(D.a.mark((function t(n,a){var s,i,r;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.get("/quizService/getEndTime/".concat(n,"/").concat(a),{headers:{Authorization:"Bearer ".concat(e.props.token)}});case 2:s=t.sent,(i=s.data).data.length&&(console.log("i am in"),e.setState({hasStarted:!0}),console.log(i.data,"i am data"),r=i.data[0].endTime,Date.now()>r&&e.setState({hasEnded:!0}));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onPreRegisterHandler=function(){var t={headers:{Authorization:"Bearer ".concat(e.props.token)}},n={requestDetails:{eventCode:e.state.event.eventCode,user:JSON.parse(localStorage.getItem("userId"))}};y.a.post("/quizService/addRequests",n,t).then((function(e){console.log(e)})),e.props.history.push("/events")},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t={};y.a.get("/eventService/getEvent/"+this.props.match.params.id,{headers:{Authorization:"Bearer ".concat(this.props.token)}}).then((function(n){t=n.data.data,e.getEndTime(e.userId,t.eventCode),e.setState({event:t}),y.a.get("/quizService/getRequests",{headers:{Authorization:"Bearer ".concat(e.props.token)}}).then((function(t){t.data.data.map((function(t){var n=JSON.stringify(t.user),a=localStorage.getItem("userId");t.eventCode===e.state.event.eventCode&&n===a&&e.setState({hasRegistered:!0})}))})),y.a.get("/quizService/getResponses",{headers:{Authorization:"Bearer ".concat(e.props.token)}}).then((function(t){t.data.data.map((function(t){var n=JSON.stringify(t.user),a=localStorage.getItem("userId");t.eventCode===e.state.event.eventCode&&n===a&&e.setState({hasSubmitted:!0})})),e.setState({loading:!1})}))}))}},{key:"deleteEventHandler",value:function(e){var t=this;y.a.delete("/eventService/deleteEvent/"+this.state.event._id,{headers:{Authorization:"Bearer ".concat(this.props.token)}}).then((function(e){t.setState({isEventDeleted:!t.state.isEventDeleted})}))}},{key:"render",value:function(){var e=this,t=Object(O.jsx)("div",{}),n=JSON.parse(localStorage.getItem("userId")).privileges;if(this.state.event){var a=this.state.event.name.split(" ");t=Object(O.jsxs)("div",{className:z.a.fond,children:[Object(O.jsx)("span",{className:z.a.s1,children:a[0]}),Object(O.jsx)("span",{className:z.a.s2,children:a[1]?a[1]:""})]})}return this.state.loading?Object(O.jsx)(C,{}):Object(O.jsxs)("div",{className:z.a.EventDetails,children:[this.state.isEventDeleted?Object(O.jsx)(v.a,{to:"/events"}):null,t,Object(O.jsxs)("div",{className:z.a.card,children:[Object(O.jsx)("div",{className:z.a.thumbnail,children:Object(O.jsx)("img",{alt:"eventImage",className:z.a.left,src:q[this.state.event.eventCode.toLowerCase()]})}),Object(O.jsxs)("div",{className:z.a.right,children:[Object(O.jsx)("h1",{children:this.state.event.name}),Object(O.jsx)("div",{className:z.a.seperator}),Object(O.jsx)("p",{children:this.state.event.description})]}),Object(O.jsxs)("div",{style:{position:"absolute",bottom:"3%",right:"3%"},children:["admin"===n&&Object(O.jsx)(L.a,{onClick:function(){return e.deleteEventHandler(e.props)},danger:!0,children:"Delete"}),this.state.isLive&&this.state.hasSubmitted&&Object(O.jsx)("p",{className:"btn btn-info",children:"We Have Recieved Your Submission"}),this.state.isLive&&!this.state.hasStarted&&!this.state.hasSubmitted&&Object(O.jsx)(L.a,{onClick:function(){e.addStartTime()},primary:!0,children:"Start Event"}),this.state.isLive&&this.state.hasStarted&&!this.state.hasEnded&&!this.state.hasSubmitted&&Object(O.jsx)(o.b,{to:this.state.event?"/eventExam/"+this.state.event._id:"",children:Object(O.jsx)(L.a,{primary:!0,children:"Continue event"})}),!this.state.isLive&&this.state.hasRegistered&&Object(O.jsx)(L.a,{color:"lime",children:" Already Registered"}),!this.state.isLive&&!this.state.hasRegistered&&Object(O.jsx)(L.a,{onClick:this.onPreRegisterHandler,primary:!0,children:"Pre-Register"}),this.state.isLive&&this.state.hasStarted&&this.state.hasEnded&&!this.state.hasSubmitted&&Object(O.jsx)(L.a,{primary:!0,children:"No Responses, Event Has Ended"})]}),Object(O.jsx)("div",{style:{position:"absolute",bottom:"3%",left:"3%"},children:Object(O.jsx)(g,{hoursMinSecs:this.timeToLive(this.state.event.endTime)})})]})]})}}]),n}(a.Component),M=Object(c.b)((function(e){return{token:e.auth.token}}))(H),U=n(129),Q=n.n(U),B=n(130),P=n.n(B),J=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(O.jsx)("div",{className:P.a.container,children:Object(O.jsxs)("li",{children:[Object(O.jsx)("input",{value:this.props.option.key,checked:this.props.checked,onClick:this.props.onValueChange.bind(this,this.props.checked),type:"radio",id:this.props.option.key,name:this.props.details.qid}),Object(O.jsx)("div",{className:P.a.check}),Object(O.jsx)("label",{for:this.props.option.key,children:this.props.option.text})]})})}}]),n}(a.Component),F=J,W=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={forceReRender:!0},e.forceReRender=function(){e.setState((function(e){return{forceReRender:!e.forceReRender}}))},e.onValueChange=function(t,n){t?(console.log("null send"),e.props.onOptionUpdate(null)):e.props.onOptionUpdate(n.target.value),e.forceReRender()},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=JSON.parse(localStorage.getItem("userResponses"))[this.props.event].responses[this.props.details.qid-1].userAns;console.log(t);var n=this.props.details.options.map((function(n,a){var s=n.key===t;return Object(O.jsx)(F,{option:n,event:e.props.event,details:e.props.details,onValueChange:e.onValueChange,checked:s})}));return Object(O.jsxs)("div",{className:Q.a.container,children:[Object(O.jsx)("div",{className:Q.a.ques,children:this.props.details.text}),Object(O.jsx)("ul",{style:{padding:"0",marginTop:"3%"},children:n}),Object(O.jsx)("button",{onClick:function(){return e.props.nextPrevHandler("prev")},className:"btn btn-success",style:{position:"absolute",bottom:"3%",left:"3%"},children:"Previous"}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{onClick:function(){return e.props.nextPrevHandler("next")},className:"btn btn-success",style:{position:"absolute",bottom:"3%",right:"3%"},children:"Next"})})]})}}]),n}(a.Component),V=W,K=n(67),G=n.n(K),Y=n(42),X=n.n(Y),$=n(154),Z=n(160),ee=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).userId=JSON.parse(localStorage.getItem("userId"))._id,a.getEndTime=function(){var e=Object(A.a)(D.a.mark((function e(t,n){var s,i,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("/quizService/getEndTime/".concat(t,"/").concat(n),{headers:{Authorization:"Bearer ".concat(a.props.token)}});case 2:if(s=e.sent,i=s.data,r=i.data[0].endTime,!i.data.length){e.next=8;break}return a.setState({endTime:r}),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.onOptionUpdate=function(e){console.log(e);var t=JSON.parse(localStorage.getItem("userResponses")),n=t[a.state.event.eventCode],s=n.responses[n.currentQuestion-1];s.userAns=e,n.responses[n.currentQuestion-1]=s,t[a.state.event.eventCode]=n,localStorage.setItem("userResponses",JSON.stringify(t))},a.onQuestionChange=function(e){var t=JSON.parse(localStorage.getItem("userResponses")),n=t[a.state.event.eventCode],s=Object(O.jsx)(V,{nextPrevHandler:a.onClickNextAndPrevHandler,details:e,event:a.state.event.eventCode,onOptionUpdate:a.onOptionUpdate});n.currentQuestion=e.qid,t[a.state.event.eventCode]=n,localStorage.setItem("userResponses",JSON.stringify(t)),console.log(t),a.setState({question:s,currentQuestion:e.qid})},a.onClickNextAndPrevHandler=function(e){var t=a.state.currentQuestion;"prev"==e?1!==a.state.currentQuestion&&(t=a.state.currentQuestion-1):"next"==e&&(a.state.currentQuestion!==a.state.event.questions.length&&(t=a.state.currentQuestion+1),console.log("from next handler",t));var n=a.state.event.questions.filter((function(e){return e.qid===t}));console.log(n),a.onQuestionChange(n[0])},a.onFinalSubmitHandler=Object(A.a)(D.a.mark((function e(){var t,n,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:"Bearer ".concat(a.props.token)}},n=a.state.event.eventCode,s={responseDetails:{eventCode:n,user:JSON.parse(localStorage.getItem("userId")),response:JSON.parse(localStorage.getItem("userResponses"))[n].responses}},e.next=5,y.a.post("/quizService/addResponse",s,t).then((function(e){X()(".myModal").css("display","block"),Z.b.success("Responses submitted successfully"),a.props.history.push("/events")}));case 5:case"end":return e.stop()}}),e)}))),a.closeModal=function(){X()(".myModal").css("display","none")},a.state={event:null,eventName:null,isEventDeleted:!1,question:null,currentQuestion:null,optionSelected:null,loading:!0,endTime:""},a}return Object(u.a)(n,[{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"componentDidMount",value:function(){var e=this;y.a.get("/eventService/getEvent/"+this.props.match.params.id,{headers:{Authorization:"Bearer ".concat(this.props.token)}}).then((function(t){var n=t.data.data;e.getEndTime(e.userId,n.eventCode).then((function(t){Date.now()>t?console.log("time over"):(console.log(t-Date.now()),e.timer=setTimeout((function(){e.onFinalSubmitHandler()}),t-Date.now()))}));var a=JSON.parse(localStorage.getItem("userResponses"));a=a[n.eventCode];var s=n.questions.filter((function(e){return e.qid===a.currentQuestion}))[0];console.log(s);var i=a.responses[a.currentQuestion-1];console.log(i);var r=Object(O.jsx)(V,{nextPrevHandler:e.onClickNextAndPrevHandler,details:s,event:n.eventCode,onOptionUpdate:e.onOptionUpdate,res:i.userAns});e.setState({event:n,currentQuestion:a.currentQuestion,question:r,loading:!1})}))}},{key:"render",value:function(){var e=this,t=null;return this.state.event&&(t=this.state.event.questions.map((function(t,n){return Object(O.jsx)("div",{onClick:function(){return e.onQuestionChange(t)},className:G.a.questionBox,children:n+1},n)}))),this.state.loading?Object(O.jsx)(C,{}):Object(O.jsxs)(O.Fragment,{children:[this.state.event?Object(O.jsxs)("div",{className:G.a.eventName,children:[this.state.event.name,console.log(Date.now()+1e4-parseInt(this.state.endTime)),this.state.endTime&&Object(O.jsx)($.a,{date:parseInt(this.state.endTime)})]}):Object(O.jsx)("div",{children:"no event"}),Object(O.jsxs)("div",{className:G.a.container,children:[Object(O.jsx)("div",{className:G.a.allQuestions,children:t}),Object(O.jsxs)("div",{className:G.a.currentQuestion,children:[this.state.question,Object(O.jsx)("button",{className:"btn btn-info",onClick:this.onFinalSubmitHandler,children:"Final Submit"})]})]}),Object(O.jsxs)("div",{className:G.a.myModal+" myModal",children:[Object(O.jsx)("p",{className:"myModal",children:"Are You Sure!"}),Object(O.jsx)("button",{className:"btn btn-info",onClick:this.closeModal,children:"No"}),Object(O.jsx)(o.b,{to:"/events",children:Object(O.jsx)("button",{className:"btn btn-info",children:"Yes"})})]})]})}}]),n}(a.Component),te=Object(c.b)((function(e){return{token:e.auth.token}}))(ee),ne=n(1),ae=n(118),se=n.n(ae),ie=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={eventDetails:{name:"",description:"",endTime:"2022-02-03T10:30"},isSubmitted:!1,loading:!1},e.handle=function(t){var n=Object(ne.a)({},e.state.eventDetails);n[t.target.id]=t.target.value,e.setState({eventDetails:n}),console.log(n)},e.submit=function(t){e.setState({loading:!0});t.preventDefault(),y.a.post("/eventService/addEvent",{eventDetails:[Object(ne.a)({},e.state.eventDetails)]},{headers:{authorization:"Bearer ".concat(e.props.token)}}).then((function(t){console.log(t,Date.now()),e.setState({loading:!1}),e.setState({isSubmitted:!e.state.isSubmitted})})),console.log(e.state.eventDetails)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return this.state.loading?Object(O.jsx)(C,{}):Object(O.jsxs)("div",{className:se.a.login,children:[this.state.isSubmitted?Object(O.jsx)(v.a,{to:"events"}):null,Object(O.jsxs)("div",{className:se.a.form,children:[Object(O.jsx)("h2",{children:"Add Event"}),Object(O.jsx)("input",{type:"text",onChange:function(t){return e.handle(t)},id:"name",value:this.state.eventDetails.name,placeholder:"Event name",name:"hello"}),Object(O.jsx)("input",{type:"text",onChange:function(t){return e.handle(t)},id:"description",value:this.state.eventDetails.description,placeholder:"Description"}),Object(O.jsx)("input",{type:"datetime-local",onChange:function(t){return e.handle(t)},id:"endTime",value:this.state.eventDetails.endTime,placeholder:"End Time"}),Object(O.jsx)("input",{type:"submit",onClick:this.submit,className:se.a.submit,value:"Submit"})]})]})}}]),n}(s.a.Component),re=Object(c.b)((function(e){return{token:e.auth.token}}))(ie),oe=n(3),ce=n(119),le=n.n(ce),ue="AUTH_START",de="AUTH_SUCCESS",he="AUTH_FAIL",ve="AUTH_LOGOUT",je=n(85),pe=n.n(je),be=(n(202),n(156)),me=Object(be.a)({forceRefresh:!0}),fe=function(e,t){return{type:de,idToken:e,userId:t}},Oe=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),localStorage.removeItem("userResponses"),{type:ve}},ge=function(e){return console.log(e),function(t){setTimeout((function(){t(Oe())}),1e3*e)}},xe=function(e,t,n){var a=function(){var e=Object(A.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){y.a.get("/eventService/getEvents",{headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){var n=t.data.data,a={};n.map((function(e){var t=[];e.questions.map((function(e){var n={qid:e.qid,userAns:null};t.push(n)}));var n={eventName:e.name,eventCode:e.eventCode,currentQuestion:1,responses:t};a[e.eventCode]=n})),console.log(a),e(a)})).catch((function(e){n(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return function(s){s({type:ue});var i={userDetails:{username:e,password:t,privileges:"user"}},r="/userService/login";n&&(r="/userService/sign-up"),y.a.post(r,i).then(function(){var e=Object(A.a)(D.a.mark((function e(t){var n,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t.data.data.accessToken);case 2:n=e.sent,i=new Date((new Date).getTime()+1e3*t.data.data.expireIn),localStorage.setItem("token",t.data.data.accessToken),localStorage.setItem("expirationDate",i),localStorage.setItem("userId",JSON.stringify(t.data.data.userId)),localStorage.setItem("userResponses",JSON.stringify(n)),s(fe(t.data.data.accessToken,t.data.data.userId)),s(ge(t.data.data.expireIn)),me.push("/events");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),Z.b.error("username or email not found"),s(function(e){return{type:he,authData:e}}(e))}))}},_e=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={controls:{email:{elementType:"input",elementConfig:{type:"email",placeholder:"Mail Address"},value:"",validation:{required:!0,isEmail:!0},valid:!1,touched:!1},password:{elementType:"input",elementConfig:{type:"password",placeholder:"Password"},value:"",validation:{required:!0,minLength:6},valid:!1,touched:!1}},isSignUp:!1,isAuthenticated:!1},e.inputChangedHandler=function(t,n){var a=Object(ne.a)(Object(ne.a)({},e.state.controls),{},Object(oe.a)({},n,Object(ne.a)(Object(ne.a)({},e.state.controls[n]),{},{value:t.target.value,valid:e.checkValidity(t.target.value,e.state.controls[n].validation),touched:!0})));e.setState(Object(ne.a)(Object(ne.a)({},e.state),{},{controls:a}))},e.signInUpHandler=function(t){t.preventDefault(),e.setState(Object(ne.a)(Object(ne.a)({},e.state),{},{isSignUp:!e.state.isSignUp}))},e.submitHandler=function(t){t.preventDefault(),e.props.onAuth(e.state.controls.email.value,e.state.controls.password.value,e.state.isSignUp),e.setState(Object(ne.a)(Object(ne.a)({},e.state),{},{isAuthenticated:!0}))},e}return Object(u.a)(n,[{key:"checkValidity",value:function(e,t){var n=!0;if(!t)return!0;if(t.required&&(n=""!==e.trim()&&n),t.minLength&&(n=e.length>=t.minLength&&n),t.maxLength&&(n=e.length<=t.maxLength&&n),t.isEmail){n=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e)&&n}if(t.isNumeric){n=/^\d+$/.test(e)&&n}return n}},{key:"render",value:function(){var e=this,t=[];for(var n in this.state.controls)t.push({id:n,config:this.state.controls[n]});var a=t.map((function(t){return Object(O.jsx)("input",{value:t.config.value,placeholder:t.config.elementConfig.placeholder,autoComplete:"nill",type:t.config.elementConfig.type,onChange:function(n){return e.inputChangedHandler(n,t.id)}},t.id)})),s=this.state.isAuthenticated&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(v.a,{to:"/events"}),console.log("hii this is treu")]});return Object(O.jsxs)("div",{className:le.a.login,children:[s,Object(O.jsxs)("div",{className:le.a.form,children:[Object(O.jsx)("h2",{children:"Welcome"}),a,Object(O.jsx)("input",{type:"submit",onClick:this.submitHandler,className:le.a.submit,value:this.state.isSignUp?"Sign Up":"Sign In"})]})]})}}]),n}(a.Component),Se=Object(c.b)((function(e){return console.log("duck you"),console.log(e.auth.token),{isAuthenticated:null!==e.auth.token}}),(function(e){return{onAuth:function(t,n,a){return e(xe(t,n,a))}}}))(_e),ke=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.onLogout()}},{key:"render",value:function(){return Object(O.jsx)(v.a,{to:"/"})}}]),n}(a.Component),ye=Object(c.b)(null,(function(e){return{onLogout:function(){return e(Oe())}}}))(ke),Ee=(n(203),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).animation=function(){var e=X()("#navbarSupportedContent").find(".active"),t=e.innerHeight(),n=e.innerWidth(),a=e.position(),s=e.position();X()(".hori-selector").css({top:a.top+"px",left:s.left+"px",height:t+"px",width:n+"px"}),X()("#navbarSupportedContent").on("click","li",(function(e){console.log(e),X()("#navbarSupportedContent ul li").removeClass("active"),X()(this).addClass("active");var t=X()(this).innerHeight(),n=X()(this).innerWidth(),a=X()(this).position(),s=X()(this).position();X()(".hori-selector").css({top:a.top+"px",left:s.left+"px",height:t+"px",width:n+"px"})}))},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.animation(),X()(window).on("resize",(function(){setTimeout((function(){e.animation()}),500)}))}},{key:"render",value:function(){var e=this,t=JSON.parse(localStorage.getItem("userId")),n=this.props.isAuthenticated?Object(O.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(O.jsxs)("div",{className:"hori-selector",children:[Object(O.jsx)("div",{className:"left"}),Object(O.jsx)("div",{className:"right"})]}),Object(O.jsx)("li",{className:"nav-item active",children:Object(O.jsxs)(o.c,{className:"nav-link",to:"/events",exact:!0,children:[Object(O.jsx)("i",{class:"fa fa-home"}),"Home"]})}),t&&"admin"===t.privileges&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(o.c,{className:"nav-link",to:"/addEvent",exact:!0,children:[Object(O.jsx)("i",{class:"fa fa-calendar"}),"Add Event"]})}),Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(o.c,{className:"nav-link",to:"/responses",exact:!0,children:[Object(O.jsx)("i",{className:"fa fa-reply-all"}),"Responses"]})}),Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(o.c,{className:"nav-link",to:"/requests",exact:!0,children:[Object(O.jsx)("i",{class:"fa fa-users"}),"Requests"]})})]}),Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(o.c,{className:"nav-link",to:"/logout",exact:!0,children:[Object(O.jsx)("i",{className:"fa fa-sign-out"}),"Logout"]})})]}):Object(O.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(O.jsxs)("div",{className:"hori-selector",children:[Object(O.jsx)("div",{className:"left"}),Object(O.jsx)("div",{className:"right"})]}),Object(O.jsx)("li",{className:"nav-item active",children:Object(O.jsxs)(o.c,{className:"nav-link",to:"/events",exact:!0,children:[Object(O.jsx)("i",{class:"fa fa-home"}),"Home"]})}),Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(o.c,{className:"nav-link",to:"/authentication",exact:!0,children:[Object(O.jsx)("i",{className:"fa fa-sign-in"}),"Login"]})})]});return Object(O.jsxs)("nav",{className:"navbar navbar-expand-custom navbar-mainbg",children:[Object(O.jsx)(o.c,{className:"navbar-brand navbar-logo",to:"/events",exact:!0,children:"Techmarathon"}),Object(O.jsx)("button",{className:"navbar-toggler",onClick:function(){setTimeout((function(){e.animation()}))},type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(O.jsx)("i",{className:"fa fa-bars text-white"})}),Object(O.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:n})]})}}]),n}(a.Component)),Ne=Object(c.b)((function(e){return{isAuthenticated:null!==e.auth.token}}))(Ee),Ce=n(284),Ie=n(283),Te=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={events:[],responses:[],loading:!0,currentEventResponse:[]},e.config={headers:{Authorization:"Bearer ".concat(e.props.token)}},e.addToFinals=function(){var t=Object(A.a)(D.a.mark((function t(n,a){var s;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s={id:a,finals:n},y.a.put("/quizService/updateResponse",s,e.config).then((function(){Z.b.success("Response Updated")}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onEventChangeHandler=function(t){console.log(t.target.value);var n=pe()(t.target.value),a=e.state.responses.filter((function(e){return e.eventCode===n}));e.setState({currentEventResponse:a})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;y.a.get("/eventService/getEvents",{headers:{Authorization:"Bearer ".concat(this.props.token)}}).then((function(t){var n=t.data.data;console.log(n),e.setState({events:n})})),y.a.get("/quizService/getResponses",this.config).then((function(t){var n=t.data.data;console.log(n),e.setState({responses:n,loading:!1,currentEventResponse:n})}))}},{key:"render",value:function(){var e,t=this,n=[{title:"Name",dataIndex:"user",key:"user",render:function(e,t){return t.user.name}},{title:"Course",dataIndex:"user",key:"user",render:function(e,t){return t.user.course}},{title:"Phone",dataIndex:"user",key:"user",render:function(e,t){return t.user.phone}},{title:"Email",dataIndex:"email",key:"email"},{title:"College",dataIndex:"college",key:"college"},{title:"Event",dataIndex:"eventCode",key:"eventCode"},{title:"Score",dataIndex:"score",key:"score"},{title:"Finals",dataIndex:"finals",key:"finals",render:function(e,n){return Object(O.jsx)(Ce.a,{defaultChecked:n.finals,onChange:function(e){return t.addToFinals(e,n._id)}})}}];e=this.state.events.map((function(e){return Object(O.jsx)("option",{value:e.name,children:e.name})}));this.state.currentEventResponse.map((function(e){return Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{children:e.user.username}),Object(O.jsx)("p",{children:e.email}),Object(O.jsx)("p",{children:e.college}),Object(O.jsx)("p",{children:e.score}),Object(O.jsx)("input",{type:"checkbox",id:e.user._id,name:"final",value:"Bike"}),Object(O.jsx)("label",{for:"vehicle1",children:"Finals"}),Object(O.jsx)("hr",{})]})}));return this.state.loading?Object(O.jsx)(C,{}):Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{for:"events",children:"Event Name:"}),Object(O.jsxs)("select",{onChange:function(e){return t.onEventChangeHandler(e)},name:"events",id:"events",children:[Object(O.jsx)("option",{value:"Select Event",children:"Select Event"}),e]}),Object(O.jsx)(Ie.a,{columns:n,dataSource:this.state.currentEventResponse,pagination:!1})]})}}]),n}(s.a.Component),Ae=Object(c.b)((function(e){return{token:e.auth.token}}))(Te),we=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={events:[],responses:[],loading:!0,currentEventResponse:[]},e.config={headers:{Authorization:"Bearer ".concat(e.props.token)}},e.addToFinals=function(){var t=Object(A.a)(D.a.mark((function t(n,a){var s;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s={id:a,finals:n},y.a.put("/quizService/updateResponse",s,e.config).then((function(){Z.b.success("Response Updated")}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onEventChangeHandler=function(t){console.log(t.target.value);var n=pe()(t.target.value),a=e.state.responses.filter((function(e){return e.eventCode===n}));e.setState({currentEventResponse:a})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;y.a.get("/eventService/getEvents",{headers:{Authorization:"Bearer ".concat(this.props.token)}}).then((function(t){var n=t.data.data;console.log(n),e.setState({events:n})})),y.a.get("/quizService/getRequests",this.config).then((function(t){var n=t.data.data;console.log(n),e.setState({responses:n,loading:!1,currentEventResponse:n})}))}},{key:"render",value:function(){var e,t=this;e=this.state.events.map((function(e){return Object(O.jsx)("option",{value:e.name,children:e.name})}));this.state.currentEventResponse.map((function(e){return Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{children:e.user.username}),Object(O.jsx)("p",{children:e.email}),Object(O.jsx)("p",{children:e.college}),Object(O.jsx)("p",{children:e.score}),Object(O.jsx)("input",{type:"checkbox",id:e.user._id,name:"final",value:"Bike"}),Object(O.jsx)("label",{for:"vehicle1",children:"Finals"}),Object(O.jsx)("hr",{})]})}));return this.state.loading?Object(O.jsx)(C,{}):Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{for:"events",children:"Event Name:"}),Object(O.jsxs)("select",{onChange:function(e){return t.onEventChangeHandler(e)},name:"events",id:"events",children:[Object(O.jsx)("option",{value:"Select Event",children:"Select Event"}),e]}),Object(O.jsx)(Ie.a,{columns:[{title:"Name",dataIndex:"user",key:"user",render:function(e,t){return t.user.name}},{title:"Email",dataIndex:"email",key:"email"},{title:"College",dataIndex:"college",key:"college"},{title:"Event",dataIndex:"eventCode",key:"eventCode"},{title:"Phone",dataIndex:"phone",key:"phone"}],dataSource:this.state.currentEventResponse,pagination:!1})]})}}]),n}(s.a.Component),De=Object(c.b)((function(e){return{token:e.auth.token}}))(we),Re=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=Object(O.jsxs)(v.d,{children:[Object(O.jsx)(v.b,{path:"/events",exact:!0,component:T}),Object(O.jsx)(v.b,{path:"/authentication",component:Se})]});if(this.props.isAuthenticated){var t=JSON.parse(localStorage.getItem("userId")).privileges;"user"===t?e=Object(O.jsxs)(v.d,{children:[Object(O.jsx)(v.b,{path:"/events",exact:!0,component:T}),Object(O.jsx)(v.b,{path:"/event/:id",component:M}),Object(O.jsx)(v.b,{path:"/eventExam/:id",component:te}),Object(O.jsx)(v.b,{path:"/logout",component:ye})]}):"admin"===t&&(e=Object(O.jsxs)(v.d,{children:[Object(O.jsx)(v.b,{path:"/events",exact:!0,component:T}),Object(O.jsx)(v.b,{path:"/event/:id",component:M}),Object(O.jsx)(v.b,{path:"/eventExam/:id",component:te}),Object(O.jsx)(v.b,{path:"/addEvent",component:re}),Object(O.jsx)(v.b,{path:"/logout",component:ye}),Object(O.jsx)(v.b,{path:"/responses",component:Ae}),Object(O.jsx)(v.b,{path:"/requests",component:De})]}))}return Object(O.jsxs)("div",{children:[Object(O.jsx)(Ne,{}),e]})}}]),n}(a.Component),ze=Object(c.b)((function(e){return{isAuthenticated:null!==e.auth.token}}))(Re),Le=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignIn()}},{key:"render",value:function(){return Object(O.jsx)(o.a,{children:Object(O.jsx)(ze,{})})}}]),n}(a.Component),qe=Object(v.g)(Object(c.b)(null,(function(e){return{onTryAutoSignIn:function(){return e((function(e){var t=localStorage.getItem("token"),n=localStorage.getItem("userId");if(t){console.log("token valid");var a=new Date(localStorage.getItem("expirationDate"));console.log(a.getTime(),(new Date).getTime()),a.getTime()>(new Date).getTime()?(console.log("token still valid"),e(fe(t,n)),console.log("---------------------"+(a.getTime()-(new Date).getTime())/1e3),e(ge((a.getTime()-(new Date).getTime())/1e3))):(console.log("not vailid time over"),e(Oe()))}else console.log("token not valid"),e(Oe())}))}}}))(Le)),He=n(92),Me=function(e,t){return Object(ne.a)(Object(ne.a)({},e),t)},Ue={token:null,userId:null,error:null,loading:!1},Qe=function(e,t){return Me(e,{error:null,loading:!0})},Be=function(e,t){return Me(e,{token:t.idToken,userId:t.userId,error:null,loading:!1})},Pe=function(e,t){return Me(e,{error:t.error,loading:!1})},Je=function(e,t){return Me(e,{token:null,userId:null})},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ue:return Qe(e);case de:return Be(e,t);case he:return Pe(e,t);case ve:return Je(e);default:return e}},We=(n(80),n(278),n(279),n(280),n(159)),Ve=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||He.c,Ke=Object(He.b)({auth:Fe});console.log("production","node env"),y.a.defaults.baseURL="https://techmarathon2022.azurewebsites.net/v1/",console.log("http://localhost:8000/v1/","https://techmarathon2022.azurewebsites.net/v1/",Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_URL:"http://localhost:8000/v1/",REACT_APP_CLOUD_SERVER:"https://techmarathon2022.azurewebsites.net/v1/"}));var Ge=Object(He.d)(Ke,Ve(Object(He.a)(We.a))),Ye=Object(O.jsx)(c.a,{store:Ge,children:Object(O.jsx)(o.a,{children:Object(O.jsx)(qe,{})})});r.a.render(Ye,document.getElementById("root"))},56:function(e,t,n){e.exports={EventDetails:"EventDetails_EventDetails__WWJIz",s1:"EventDetails_s1__yLAr4",s2:"EventDetails_s2__NlJ_V",card:"EventDetails_card__3Llo1",thumbnail:"EventDetails_thumbnail__IvO21",left:"EventDetails_left__CGsbm",right:"EventDetails_right__2hiz9",author:"EventDetails_author__1tTae",separator:"EventDetails_separator__uGcGo",fab:"EventDetails_fab__3PhW7"}},65:function(e,t,n){e.exports={event:"Event_event__1UQ3l",container:"Event_container__2CXQS",card:"Event_card__Jlwf0",right:"Event_right__iEKJ4",pic:"Event_pic__1ZjoY",social:"Event_social__5uzzQ",card2:"Event_card2__1R6qa"}},67:function(e,t,n){e.exports={questionBox:"EventExam_questionBox__1nBAg",myModal:"EventExam_myModal__2MN4A",container:"EventExam_container__3oE8J",allQuestions:"EventExam_allQuestions__3HSgQ",currentQuestion:"EventExam_currentQuestion__2Cz_n",eventName:"EventExam_eventName__143Ye"}},81:function(e,t,n){e.exports={container:"Loader_container__17eIP",body:"Loader_body__2k-Vh",speeder:"Loader_speeder__sLc9M",base:"Loader_base__NTjNP",face:"Loader_face__r0IOs",fazer1:"Loader_fazer1__1UU7M",fazer2:"Loader_fazer2__2L4bv",fazer3:"Loader_fazer3__2CZ7k",fazer4:"Loader_fazer4__1qBhH",longfazers:"Loader_longfazers__2j_JD",lf:"Loader_lf__1P7I9",lf2:"Loader_lf2__3gBK6",lf3:"Loader_lf3__RWyDL",lf4:"Loader_lf4__29wbq"}}},[[281,1,2]]]);
//# sourceMappingURL=main.2b93817e.chunk.js.map